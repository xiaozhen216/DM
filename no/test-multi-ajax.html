<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8" />
	<title>分拨日出货量</title>

	<script type="text/javascript" src="../framework/core.js"></script>
	<script type="text/javascript" src="../framework/ajax.js"></script>
	<script type="text/javascript" src="../ichartjs/ichart.1.1.min.js"></script>

	<script type="text/javascript">

	var originData;

	function query() {
		// 每次查询前先清空上次查询的数据
		originData = [];

		var selectedDate = $$("selectedDate").value;
		for (var i = 1; i <= 4; i++) {
			Ajax({
				url : '../display/json/20' + i,
				method : "POST",
				params : {"param1": selectedDate, "param2": selectedDate}, 
				type : "json",
				waiting : true,					
				ondata : function() {	
					var temp = eval(this.getResponseText);
					originData.push( temp );

					if ( originData.length == 4 ) {
						show(originData);						
					} 
				}
			});
		}
	}

	function show(originData) {
		alert(originData.length);
	}


	var originData1;
	var originData2;

	function query() {
		// 每次查询前先清空上次查询的数据
		originData1 = null;
		originData2 = null;

		var selectedDate = $$("selectedDate").value;
 
		Ajax({
			url : '../display/json/201',
			method : "POST",
			params : {"param1": selectedDate, "param2": selectedDate}, 
			type : "json",
			waiting : true,					
			ondata : function() {	
				originData1 = eval(this.getResponseText);
				if ( originData1 && originData2 ) {
					show();						
				} 
			}
		});

		Ajax({
			url : '../display/json/202',
			method : "POST",
			params : {"param1": selectedDate, "param2": selectedDate}, 
			type : "json",
			waiting : true,					
			ondata : function() {	
				originData2 = eval(this.getResponseText);
				if ( originData1 && originData2 ) {
					show();						
				} 
			}
		});
	}

	function show() {
		alert(originData1);
		alert(originData2);
	}

	</script>
</head>

<body>
	
	<form method="get" target='hiddenFrame'>
		日期: <input type="date" name="selectedDate" id="selectedDate"/> &nbsp;
		<input type="submit" onclick="query()" value="查询"/>
	</form>
	<iframe width='0px' height='0px' name='hiddenFrame'></iframe>
	
	<div id='canvasDiv'></div>

</body>
</html>